<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="goodsSqlMap">

  <typeAlias alias="goods" type="com.radius.invoicing.ibatis.model.Goods" />
  
  <sql id="goodsFileds">
  	goods_id id,goods_name name,true_goods_name realName,goods_type goodsType,host_machine_series machineSeries,machine_position machinePosition,part_no partNo,
  	map_series mapSeries,made_company company,goods_status goodStatus,weight_prop weightProp,vulnerability vulnerability,goods_description description,
  	use_status useStatus,memo memo,ledger_id ledgerId,operator operator,motify_date modifyDate,
  	creater creater,createdate createDate,reviser reviser,revisedate reviseDate,verifier verifier,verifydate verifyDate
  </sql>
  
  <resultMap id="goods" class="goods">
    <result column="goods_id" jdbcType="char" javaType="java.lang.String" property="id" />
    <result column="goods_name" jdbcType="varchar" javaType="java.lang.String" property="name" />
  	<result column="true_goods_name" jdbcType="varchar" javaType="java.lang.String" property="realName" />
  	<result column="goods_type" jdbcType="char" javaType="java.lang.String" property="goodsType" />
  	<result column="host_machine_series" jdbcType="char" javaType="java.lang.String" property="machineSeries" />
  	<result column="machine_position" jdbcType="varchar" javaType="java.lang.String" property="machinePosition" />
  	<result column="part_no" jdbcType="varchar" javaType="java.lang.String" property="partNo" />
  	<result column="map_series" jdbcType="varchar" javaType="java.lang.String" property="mapSeries" />
  	<result column="made_company" jdbcType="varchar" javaType="java.lang.String" property="company" />
  	<result column="goods_status" jdbcType="char" javaType="java.lang.String" property="goodStatus" />
  	<result column="weight_prop" jdbcType="int" javaType="java.lang.Integer" property="weightProp"/>
  	<result column="vulnerability" jdbcType="char" javaType="java.lang.String" property="vulnerability" />
  	<result column="goods_description" jdbcType="text" javaType="java.lang.String" property="description" />
  	<result column="use_status" jdbcType="char" javaType="java.lang.String" property="useStatus" />
  	
  	<result column="memo" jdbcType="text" javaType="java.lang.String" property="memo" />
  	<result column="ledger_id" jdbcType="char" javaType="java.lang.String" property="ledgerId" />
    <result column="operator" jdbcType="char" javaType="java.lang.String" property="operator" />
    <result column="modify_date" jdbcType="datetime" javaType="java.util.Date" property="modifyDate" />
    <result column="creater" jdbcType="char" javaType="java.lang.String" property="creater" />
    <result column="createdate" jdbcType="datetime" javaType="java.util.Date" property="createDate" />
    <result column="reviser" jdbcType="char" javaType="java.lang.String" property="reviser" />
    <result column="revisedate" jdbcType="datetime" javaType="java.util.Date" property="reviseDate" />
    <result column="verifier" jdbcType="char" javaType="java.lang.String" property="verifier" />    
    <result column="verifydate" jdbcType="datetime" javaType="java.util.Date" property="verifyDate"/>
  </resultMap>
  
  <sql id="whereLike">
  	<dynamic prepend="where" >
  		1=1  AND
  		<isNotNull prepend="AND" property="id">
  			goods_id=#id#
  		</isNotNull>
  		<isNotNull prepend="AND" property="name">
  			goods_name LIKE CONCAT('%',#name#,'%')	
  		</isNotNull>
  		<isNotNull prepend="AND" property="realName">
  			true_goods_name  LIKE CONCAT('%',#realName#,'%')	
  		</isNotNull>
  		<isNotNull prepend="AND" property="goodsType">
  			goods_type=#goodsType#
  		</isNotNull>
  		<isNotNull prepend="AND" property="machineSeries">
  			host_machine_series=#machineSeries#
  		</isNotNull>
  		<isNotNull prepend="AND" property="machinePosition">
  			machine_position=#machinePosition#
  		</isNotNull>
  		<isNotNull prepend="AND" property="partNo">
  			part_no=#partNo#
  		</isNotNull>
  		<isNotNull prepend="AND" property="mapSeries">
  			map_series=#mapSeries#
  		</isNotNull>
  		<isNotNull prepend="AND" property="company">
  			made_company=#company#
  		</isNotNull>
  		<isNotNull prepend="AND" property="goodStatus">
  			goods_status=#goodStatus#
  		</isNotNull>
  		<isNotNull prepend="AND" property="weightProp">
  			weight_prop=#weightProp#
  		</isNotNull>
  		<isNotNull prepend="AND" property="vulnerability">
  			vulnerability=#vulnerability#
  		</isNotNull>
  		<isNotNull prepend="AND" property="description">
  			goods_description=#description#
  		</isNotNull>
  		<isNotNull prepend="AND" property="useStatus">
  			use_status=#useStatus#
  		</isNotNull>
  		<isNotNull prepend="AND" property="memo">
  			memo=#memo#
  		</isNotNull>
  		<isNotNull prepend="AND" property="ledgerId">
  			ledger_id=#ledgerId#
  		</isNotNull>
  	</dynamic>
  </sql>
 
	 <select id="getGoods" parameterClass="goods" resultMap="goods">
	 	SELECT <include refid="goodsFileds"/>
	 	FROM RS_GOODS
	 	$condition$
	 </select>
   
   	<insert id="insert" parameterClass="goods">
   		INSERT INTO RS_GOODS (
			goods_id,
			<isNotNull 	property="name">goods_name,</isNotNull>
			<isNotNull	property="realName">true_goods_name,</isNotNull>
			<isNotNull	property="goodsType">goods_type,</isNotNull>
			<isNotNull	property="machineSeries">host_machine_series,</isNotNull>
			<isNotNull	property="machinePosition">machine_position,</isNotNull>
			<isNotNull	property="partNo">part_no,</isNotNull>
			<isNotNull	property="mapSeries">map_series,</isNotNull>
			<isNotNull	property="company">made_company,</isNotNull>
			<isNotNull	property="goodStatus">goods_status,</isNotNull>
			<isNotNull	property="weightProp">weight_prop,</isNotNull>
			<isNotNull	property="vulnerability">vulnerability,</isNotNull>
			<isNotNull	property="description">goods_description,</isNotNull>
			<isNotNull	property="useStatus">use_status,</isNotNull>
	  		<isNotNull  property="memo">memo,</isNotNull>
	  		<isNotNull  property="ledgerId">ledger_id,</isNotNull>
	  		operator,
	  	    creater,
	  	    createdate
   		)VALUES(
   			#id#,
   			<isNotNull 	property="name">#name#,</isNotNull>
			<isNotNull	property="realName">#realName#,</isNotNull>
			<isNotNull	property="goodsType">#goodsType#,</isNotNull>
			<isNotNull	property="machineSeries">#machineSeries#,</isNotNull>
			<isNotNull	property="machinePosition">#machinePosition#,</isNotNull>
			<isNotNull	property="partNo">#partNo#,</isNotNull>
			<isNotNull	property="mapSeries">#mapSeries#,</isNotNull>
			<isNotNull	property="company">#company#,</isNotNull>
			<isNotNull	property="goodStatus">#goodStatus#,</isNotNull>
			<isNotNull	property="weightProp">#weightProp#,</isNotNull>
			<isNotNull	property="vulnerability">#vulnerability#,</isNotNull>
			<isNotNull	property="description">#description#,</isNotNull>
			<isNotNull	property="useStatus">#useStatus#,</isNotNull>
	  		<isNotNull  property="memo">#memo#,</isNotNull>
	  		<isNotNull  property="ledgerId">#ledgerId#,</isNotNull>
   			 operator,creater,now()
   		)
   	</insert>
   
   	<update id="updateGoods" parameterClass="goods">
   		UPDATE RS_GOODS
   		<dynamic prepend="SET">
			<isNotNull  prepend=","   property="name">goods_name=#name#</isNotNull>
			<isNotNull  prepend=","   property="realName">true_goods_name=#realName#</isNotNull>
			<isNotNull  prepend=","   property="goodsType">goods_type=#goodsType#</isNotNull>
			<isNotNull  prepend=","   property="machineSeries">host_machine_series=#machineSeries#</isNotNull>
			<isNotNull  prepend=","   property="machinePosition">machine_position=#machinePosition#</isNotNull>
			<isNotNull  prepend=","   property="partNo">part_no=#partNo#</isNotNull>
			<isNotNull  prepend=","   property="mapSeries">map_series=#mapSeries#</isNotNull>
			<isNotNull  prepend=","   property="company">made_company=#company#</isNotNull>
			<isNotNull  prepend=","   property="goodStatus">goods_status=#goodStatus#</isNotNull>
			<isNotNull  prepend=","   property="weightProp">weight_prop=#weightProp#</isNotNull>
			<isNotNull  prepend=","   property="vulnerability">vulnerability=#vulnerability#</isNotNull>
			<isNotNull  prepend=","   property="description">goods_description=#description#</isNotNull>
			<isNotNull  prepend=","   property="useStatus">use_status=#useStatus#</isNotNull>
	 	    <isNotNull  prepend=","   property="memo">memo=#memo#</isNotNull>
	  		<isNotNull  prepend=","   property="ledgerId">ledger_id=#ledgerId#</isNotNull>
	  		<isNotNull  prepend=","   property="operator">operator=#operator#,modify_date= now()</isNotNull>
  	 		<isNotNull  prepend=","   property="reviser">reviser = #reviser#,revisedate = now() </isNotNull>
  			<isNotNull  prepend=","   property="verifier">verifier = #verifier#,verifydate = now() </isNotNull>
   		</dynamic>
   	  WHERE goods_id=#id#
   	</update>
   	<select id="getGoodsByCondition" parameterClass="goods" resultClass="goods">
   		SELECT <include refid="goodsFileds"/>
   		FROM RS_GOODS
   		<include refid="whereLike"/>
   	</select>
   	<!-- 分页查询语句 -->
   	<select id="getGoodsSplitPageBySQL" remapResults="true" parameterClass="java.lang.String" resultMap="goods">
   		$splitPageSQL$
   	</select>
   	<!-- end -->
   	
   	<select id="getGoodsSplitPageCountSQL" remapResults="true" parameterClass="java.lang.String" resultClass="java.lang.Integer">
   		$countSQL$
   	</select>
   	
   	
   	<delete id="deleteGoods" parameterClass="goods">
   		DELETE FROM RS_GOODS
   		<include refid="whereLike"/>
   	</delete>
   	
   	<select id="getGoodsInfoBySupplierAndGoods" parameterClass="goods" resultClass="java.lang.String">
   		SELECT gs.goods_id goodsId 
   		FROM RS_SUPPLIER_GOODS sgs
   		LEFT JOIN RS_GOODS  gs
   		ON sgs.goods_id = gs.goods_id 
   		<dynamic prepend="WHERE">
   			sgs.supplier_id =#supplierId# 
	   		<isNotNull  property="name"> 
	           AND  gs.goods_name LIKE CONCAT('%',#name#,'%')
	  		</isNotNull>
	  		<isNotNull  property="realName">
	           AND  gs.true_goods_name  LIKE CONCAT('%',#realName#,'%')	
	  		</isNotNull>
	  		<isNotNull  property="goodsType">
	           AND  gs.goods_type=#goodsType#
	  		</isNotNull>
	  		<isNotNull  property="machineSeries">
	           AND  gs.host_machine_series=#machineSeries#
	  		</isNotNull>
	  		<isNotNull  property="machinePosition">
	           AND  gs.machine_position=#machinePosition#
	  		</isNotNull>
	  		<isNotNull  property="partNo">
	           AND  gs.part_no=#partNo#
	  		</isNotNull>
	  		<isNotNull  property="mapSeries">
	           AND  gs.map_series=#mapSeries#
	  		</isNotNull>
	  		<isNotNull  property="company">
	           AND  gs.made_company=#company#
	  		</isNotNull>
	  		<isNotNull  property="goodStatus">
	           AND  gs.goods_status=#goodStatus#
	  		</isNotNull>
	  		<isNotNull  property="weightProp">
	           AND  gs.weight_prop=#weightProp#
	  		</isNotNull>
	  		<isNotNull  property="vulnerability">
	           AND  gs.vulnerability=#vulnerability#
	  		</isNotNull>
	  		<isNotNull  property="description">
	           AND  gs.goods_description=#description#
	  		</isNotNull>
	  		<isNotNull  property="useStatus">
	           AND  gs.use_status=#useStatus#
	  		</isNotNull>
	  		<isNotNull  property="memo">
	           AND  gs.AND	gs.memo=#memo#
	  		</isNotNull>
	  		<isNotNull  property="ledgerId">
	  		   AND	gs.ledger_id=#ledgerId#
	  		</isNotNull>
   		</dynamic>
   </select>
</sqlMap>