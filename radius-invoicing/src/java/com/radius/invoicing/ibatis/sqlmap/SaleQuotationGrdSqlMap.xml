<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="saleQuotationGrdSqlMap">

  <typeAlias alias="saleQuotationGrd" type="com.radius.invoicing.ibatis.model.SaleQuotationGrd" />
  
  <sql id="saleQuotationGrdFileds">
  	 quotation_id quotationId,goods_id goodsId,goods_name goodsName,
  	 unit unit,price_of_unit priceUnit,equivalent_unit equivalentUnit,
  	 price_of_eu priceEu,quantity_of_eu_per_unit quantityEuPerUnit,
  	 quantity_of_unit quantityUnit,quantity_of_eu quantityEu,made_date madeDate,
  	 validity_date validityDate,
  	 ledger_id ledgerId,memo memo,creater creater,createdate createdate,reviser reviser,revisedate revisedate,verifier verifydate
  </sql>
  
  <resultMap id="saleQuotationGrd" class="saleQuotationGrd">
    <result column="quotation_id" jdbcType="char" javaType="java.lang.String" property="quotationId" />
    <result column="goods_id" jdbcType="char" javaType="java.lang.String" property="goodsId" />
    <result column="goods_name" jdbcType="varchar" javaType="java.lang.String" property="goodsName" />
    <result column="unit" jdbcType="char" javaType="java.lang.String" property="unit" />
    <result column="price_of_unit" jdbcType="int" javaType="java.lang.Integer" property="priceUnit" />
    <result column="priceUnit" jdbcType="int" javaType="java.lang.Integer" property="equivalentUnit" />
    <result column="price_of_eu" jdbcType="int" javaType="java.lang.Integer" property="priceEu" />
    <result column="quantity_of_eu_per_unit" jdbcType="int" javaType="java.lang.Integer" property="quantityEuPerUnit" />
    <result column="quantity_of_unit" jdbcType="int" javaType="java.lang.Integer" property="quantityUnit" />
    <result column="quantity_of_eu" jdbcType="int" javaType="java.lang.Integer" property="quantityEu" />
    <result column="made_date" jdbcType="datetime" javaType="java.util.Date" property="madeDate" />
    <result column="validity_date" jdbcType="datetime" javaType="java.util.Date" property="validityDate" />
  	<result column="ledger_id" jdbcType="char" javaType="java.lang.String" property="ledgerId" />
  	<result column="memo" jdbcType="text" javaType="java.lang.String" property="memo" />
    <result column="creater" jdbcType="char" javaType="java.lang.String" property="creater" />
    <result column="createdate" jdbcType="datetime" javaType="java.util.Date" property="createdate" />
    <result column="reviser" jdbcType="char" javaType="java.lang.String" property="reviser" />
    <result column="revisedate" jdbcType="datetime" javaType="java.util.Date" property="revisedate" />
    <result column="verifier" jdbcType="char" javaType="java.lang.String" property="verifier" />    
    <result column="verifydate" jdbcType="datetime" javaType="java.util.Date" property="verifydate"/>
  </resultMap>
  
  <sql id="whereLike">
  	<dynamic prepend="where">
  		1=1  
  		<isNotEmpty prepend="and" property="quotationId">quotation_id=#quotationId#</isNotEmpty>
  		<isNotEmpty prepend="and" property="goodsId">goods_id=#goodsId#</isNotEmpty>
  		<isNotEmpty prepend="and" property="goodsName">goods_name=#goodsName#</isNotEmpty>
		<isNotEmpty prepend="and" property="unit">unit=#unit#</isNotEmpty>
		<isNotNull prepend="and" property="priceUnit">price_of_unit=#priceUnit#</isNotNull>
		<isNotNull prepend="and" property="equivalentUnit">equivalent_unit=#equivalentUnit#</isNotNull>
		<isNotNull prepend="and" property="priceEu">price_of_eu=#priceEu#</isNotNull>
		<isNotNull prepend="and" property="quantityEuPerUnit">quantity_of_eu_per_unit=#quantityEuPerUnit#</isNotNull>
		<isNotNull prepend="and" property="quantityUnit">quantity_of_unit=#quantityUnit#</isNotNull>
		<isNotNull prepend="and" property="quantityEu">quantity_of_eu=#quantityEu#</isNotNull>
		<isNotNull prepend="and" property="madeDate">made_date=#madeDate#</isNotNull>
		<isNotNull prepend="and" property="validityDate">validity_date=#validityDate#</isNotNull>
 		<isNotEmpty prepend="and" property="ledgerId">ledger_id=#ledgerId#</isNotEmpty> 
 		<isNotEmpty prepend="and" property="memo">memo=#memo#</isNotEmpty> 
  	</dynamic>
  </sql>
 
	 <select id="getSaleQuotationGrdByPk" parameterClass="saleQuotationGrd" resultMap="saleQuotationGrd">
	 	SELECT <include refid="saleQuotationGrdFileds"/>
	 	FROM RS_SALE_QUOTATION_GRD
	 	WHERE quotation_id =#quotationId# AND goods_id=#goodsId#
	 </select>
   
   	<insert id="insert" parameterClass="saleQuotationGrd">
   		INSERT INTO RS_SALE_QUOTATION_GRD (
   			quotation_id,
   			goods_id,
	  		<isNotEmpty  property="goodsName">goods_name,</isNotEmpty>
			<isNotEmpty  property="unit">unit,</isNotEmpty>
			<isNotNull  property="priceUnit">price_of_unit,</isNotNull>
			<isNotNull  property="equivalentUnit">equivalent_unit,</isNotNull>
			<isNotNull  property="priceEu">price_of_eu,</isNotNull>
			<isNotNull  property="quantityEuPerUnit">quantity_of_eu_per_unit,</isNotNull>
			<isNotNull  property="quantityUnit">quantity_of_unit,</isNotNull>
			<isNotNull  property="quantityEu">quantity_of_eu,</isNotNull>
			<isNotNull  property="madeDate">made_date,</isNotNull>
			<isNotNull  property="validityDate">validity_date,</isNotNull>
			<isNotEmpty  property="ledgerId">ledger_id,</isNotEmpty> 
 		    <isNotEmpty  property="memo">memo,</isNotEmpty> 
	  	    creater,
	  	    createdate
   		)VALUES(
   			#quotationId#,
   			#goodsId#,
	  		<isNotEmpty  property="quotationId">#quotationId#,</isNotEmpty>
	  		<isNotEmpty  property="goodsId">#goodsId#,</isNotEmpty>
	  		<isNotEmpty  property="goodsName">#goodsName#,</isNotEmpty>
			<isNotEmpty  property="unit">#unit#,</isNotEmpty>
			<isNotNull  property="priceUnit">#priceUnit#,</isNotNull>
			<isNotNull  property="equivalentUnit">#equivalentUnit#,</isNotNull>
			<isNotNull  property="priceEu">#priceEu#,</isNotNull>
			<isNotNull  property="quantityEuPerUnit">#quantityEuPerUnit#,</isNotNull>
			<isNotNull  property="quantityUnit">#quantityUnit#,</isNotNull>
			<isNotNull  property="quantityEu">#quantityEu#,</isNotNull>
			<isNotNull  property="madeDate">#madeDate#,</isNotNull>
			<isNotNull  property="validityDate">#validityDate#,</isNotNull>
	 		<isNotEmpty  property="ledgerId">#ledgerId#,</isNotEmpty> 
	 		<isNotEmpty  property="memo">#memo#,</isNotEmpty> 
   			 creater,now()
   		)
   	</insert>
   
   	<update id="updateSaleQuotationGrdById" parameterClass="saleQuotationGrd">
   		UPDATE RS_SALE_QUOTATION_GRD
   		<dynamic prepend="SET">
	  		<isNotEmpty prepend="," property="goodsName">goods_name=#goodsName#</isNotEmpty>
			<isNotEmpty prepend="," property="unit">unit=#unit#</isNotEmpty>
			<isNotNull prepend="," property="priceUnit">price_of_unit=#priceUnit#</isNotNull>
			<isNotNull prepend="," property="equivalentUnit">equivalent_unit=#equivalentUnit#</isNotNull>
			<isNotNull prepend="," property="priceEu">price_of_eu=#priceEu#</isNotNull>
			<isNotNull prepend="," property="quantityEuPerUnit">quantity_of_eu_per_unit=#quantityEuPerUnit#</isNotNull>
			<isNotNull prepend="," property="quantityUnit">quantity_of_unit=#quantityUnit#</isNotNull>
			<isNotNull prepend="," property="quantityEu">quantity_of_eu=#quantityEu#</isNotNull>
			<isNotNull prepend="," property="madeDate">made_date=#madeDate#</isNotNull>
			<isNotNull prepend="," property="validityDate">validity_date=#validityDate#</isNotNull>
	 		<isNotEmpty prepend="," property="ledgerId">ledger_id=#ledgerId#</isNotEmpty> 
	 		<isNotEmpty prepend="," property="memo">memo=#memo#</isNotEmpty> 
  	 		<isNotEmpty  prepend="," property="reviser">reviser = #reviser#,revisedate = now() </isNotEmpty>
  			<isNotEmpty  prepend="," property="verifier">verifier = #verifier#,verifydate = now() </isNotEmpty>
  			<isNotNull prepend="," property="yesOrNo">delivery_or_not=#yesOrNo#</isNotNull> 
   		</dynamic>
   		WHERE quotation_id =#quotationId# AND goods_id=#goodsId#
   	</update>
   	<select id="getSaleQuotationGrdByCondition" parameterClass="saleQuotationGrd" resultMap="saleQuotationGrd">
   		SELECT <include refid="saleQuotationGrdFileds"/>
   		FROM RS_SALE_QUOTATION_GRD
   		<include refid="whereLike"/>
   	</select>
   	<!-- 分页查询语句 -->
   	<select id="getSaleQuotationGrdSplitPageBySQL" remapResults="true" parameterClass="java.lang.String" resultMap="saleQuotationGrd">
   		$splitPageSQL$
   	</select>
   	<!-- end -->
   	
   	<select id="getSaleQuotationGrdSplitPageCountSQL" remapResults="true" parameterClass="java.lang.String" resultClass="java.lang.Integer">
   		$countSQL$
   	</select>
   	
   	<delete id="deleteSaleQuotationGrd" parameterClass="saleQuotationGrd">
   		DELETE FROM RS_SALE_QUOTATION_GRD
   		<include refid="whereLike"/>
   	</delete>
</sqlMap>