<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="purchaseOrderSqlMap">

  <typeAlias alias="purchaseOrder" type="com.radius.invoicing.ibatis.model.PurchaseOrder" />
  
  <sql id="purchaseOrderFileds">
  	 purchase_order_id purchaseOrderId,purchase_order_merger_id purchaseOrderMergerId,`status` stats,ordered_date orderedDate,delivery_date deliveryDate,
	supplier_id supplierId,supplier_name supplierName,tel tel,link_man linkMan,purchaser purchaser,terms terms,fax fax,customer_bill_id customerBillId,
	delivery_point deliveryPoint,quality_status qualityStatus,audit_status auditStatus,instore_status instoreStatus,payment_status paymentStatus,
	paymented_status paymentedStatus,purchase_receive_order_id purchaseReceiveOrderId,instore_id instoreId,goods_qt_id goodsQtId,
	ordered_amount orderedAmount,print_times printTimes,newest_print_time printTime,newest_print_acc printAcc,newest_print_record printRecord,operator operator,
  	 ledger_id ledgerId,memo memo,creater creater,createdate createdate,reviser reviser,revisedate revisedate,verifier verifydate
  </sql>
  
  <resultMap id="purchaseOrder" class="purchaseOrder">
    <result column="purchase_order_id" jdbcType="char" javaType="java.lang.String" property="purchaseOrderId" />
    <result column="purchase_order_merger_id" jdbcType="char" javaType="java.lang.String" property="purchaseOrderMergerId" />
    <result column="`status`" jdbcType="char" javaType="java.lang.String" property="stats" />
    <result column="ordered_date" jdbcType="datetime" javaType="java.util.Date" property="orderedDate"/>
    <result column="delivery_date" jdbcType="datetime" javaType="java.util.Date" property="deliveryDate"/>
    <result column="supplier_id" jdbcType="varchar" javaType="java.lang.String" property="supplierId" />
    <result column="supplier_name" jdbcType="varchar" javaType="java.lang.String" property="supplierName" />
    <result column="tel" jdbcType="char" javaType="java.lang.String" property="tel" />
    <result column="link_man" jdbcType="char" javaType="java.lang.String" property="linkMan" />
    <result column="purchaser" jdbcType="char" javaType="java.lang.String" property="purchaser" />
    <result column="terms" jdbcType="text" javaType="java.lang.String" property="terms" />
    <result column="fax" jdbcType="char" javaType="java.lang.String" property="fax" />
    <result column="customer_bill_id" jdbcType="char" javaType="java.lang.String" property="customerBillId" />
    <result column="delivery_point" jdbcType="char" javaType="java.lang.String" property="deliveryPoint" />
    <result column="quality_status" jdbcType="char" javaType="java.lang.String" property="qualityStatus" />
    <result column="audit_status" jdbcType="char" javaType="java.lang.String" property="auditStatus" />
    <result column="instore_status" jdbcType="char" javaType="java.lang.String" property="instoreStatus" />
    <result column="payment_status" jdbcType="char" javaType="java.lang.String" property="paymentStatus" />
    <result column="paymented_status" jdbcType="char" javaType="java.lang.String" property="paymentedStatus" />
    <result column="purchase_receive_order_id" jdbcType="char" javaType="java.lang.String" property="purchaseReceiveOrderId" />
    <result column="instore_id" jdbcType="char" javaType="java.lang.String" property="instoreId" />
    <result column="goods_qt_id" jdbcType="char" javaType="java.lang.String" property="goodsQtId" />
    <result column="ordered_amount" jdbcType="int" javaType="java.lang.Integer" property="orderedAmount" />
    <result column="print_times" jdbcType="int" javaType="java.lang.Integer" property="printTimes" />
    <result column="newest_print_time" jdbcType="datetime" javaType="java.util.Date" property="printTime"/>
    <result column="newest_print_acc" jdbcType="char" javaType="java.lang.String" property="printAcc" />
    <result column="newest_print_record" jdbcType="char" javaType="java.lang.String" property="printRecord" />
    <result column="operator" jdbcType="char" javaType="java.lang.String" property="operator" />
  	<result column="ledger_id" jdbcType="char" javaType="java.lang.String" property="ledgerId" />
  	<result column="memo" jdbcType="text" javaType="java.lang.String" property="memo" />
    <result column="creater" jdbcType="char" javaType="java.lang.String" property="creater" />
    <result column="createdate" jdbcType="datetime" javaType="java.util.Date" property="createdate" />
    <result column="reviser" jdbcType="char" javaType="java.lang.String" property="reviser" />
    <result column="revisedate" jdbcType="datetime" javaType="java.util.Date" property="revisedate" />
    <result column="verifier" jdbcType="char" javaType="java.lang.String" property="verifier" />    
    <result column="verifydate" jdbcType="datetime" javaType="java.util.Date" property="verifydate"/>
  </resultMap>
  
  <sql id="whereLike">
  	<dynamic prepend="where">
  		1=1  and 
  		<isNotEmpty prepend="and" property="purchaseOrderId">purchase_order_id=#purchaseOrderId#</isNotEmpty>
  		<isNotEmpty prepend="and" property="purchaseOrderMergerId">purchase_order_merger_id=#purchaseOrderMergerId#</isNotEmpty>
  		<isNotEmpty prepend="and" property="stats">`status`=#stats#</isNotEmpty>
		<isNotNull prepend="and" property="orderedDate">ordered_date=#orderedDate#</isNotNull>
		<isNotNull prepend="and" property="deliveryDate">delivery_date=#deliveryDate#</isNotNull>
  		<isNotEmpty prepend="and" property="supplierId">supplier_id=#supplierId#</isNotEmpty>
  		<isNotEmpty prepend="and" property="supplierName">supplier_name=#supplierName#</isNotEmpty>
  		<isNotEmpty prepend="and" property="tel">tel=#tel#</isNotEmpty>
  		<isNotEmpty prepend="and" property="linkMan">link_man=#linkMan#</isNotEmpty>
  		<isNotEmpty prepend="and" property="purchaser">purchaser=#purchaser#</isNotEmpty>
  		<isNotEmpty prepend="and" property="fax">fax=#fax#</isNotEmpty>
		<isNotEmpty prepend="and" property="customerBillId">customer_bill_id=#customerBillId#</isNotEmpty>
		<isNotEmpty prepend="and" property="deliveryPoint">delivery_point=#deliveryPoint#</isNotEmpty>
		<isNotEmpty prepend="and" property="qualityStatus">quality_status=#qualityStatus#</isNotEmpty>
		<isNotEmpty prepend="and" property="auditStatus">audit_status=#auditStatus#</isNotEmpty>
		<isNotEmpty prepend="and" property="instoreStatus">instore_status=#instoreStatus#</isNotEmpty>
		<isNotEmpty prepend="and" property="paymentStatus">payment_status=#paymentStatus#</isNotEmpty>
		<isNotEmpty prepend="and" property="paymentedStatus">paymented_status=#paymentedStatus#</isNotEmpty>
		<isNotEmpty prepend="and" property="purchaseReceiveOrderId">purchase_receive_order_id=#purchaseReceiveOrderId#</isNotEmpty>
		<isNotEmpty prepend="and" property="instoreId">instore_id=#instoreId#</isNotEmpty>
		<isNotEmpty prepend="and" property="goodsQtId">goods_qt_id=#goodsQtId#</isNotEmpty>
		<isNotNull prepend="and" property="orderedAmount">ordered_amount=#orderedAmount#</isNotNull>
		<isNotNull prepend="and" property="equivalentUnit">print_times=#printTimes#</isNotNull>
		<isNotEmpty prepend="and" property="printAcc">newest_print_acc=#printAcc#</isNotEmpty>
		<isNotEmpty prepend="and" property="printRecord">newest_print_record=#printRecord#</isNotEmpty>
		<isNotNull prepend="and" property="printTime">newest_print_time=#printTime#</isNotNull>
		<isNotEmpty prepend="and" property="operator">operator=#operator#</isNotEmpty>
 		<isNotEmpty prepend="and" property="ledgerId">ledger_id=#ledgerId#</isNotEmpty> 
 		<isNotEmpty prepend="and" property="memo">memo=#memo#</isNotEmpty> 
  	</dynamic>
  </sql>
 
	 <select id="getPurchaseOrderByPk" parameterClass="java.lang.String" resultClass="purchaseOrder">
	 	SELECT <include refid="purchaseOrderFileds"/>
	 	FROM RS_PURCHASE_ORDER
	 	WHERE purchase_order_id =#purchaseOrderId#
	 </select>
	 
	 <select id="getPurchaseOrder" parameterClass="purchaseOrder" resultClass="purchaseOrder">
	 	SELECT <include refid="purchaseOrderFileds"/>
	 	FROM RS_PURCHASE_ORDER
	 	<include refid="whereLike"/>
	 </select>
   
   	<insert id="insert" parameterClass="purchaseOrder">
   		INSERT INTO RS_PURCHASE_ORDER (
   			purchase_order_id,
	  		<isNotEmpty  property="purchaseOrderMergerId">purchase_order_merger_id,</isNotEmpty>
	  		<isNotEmpty  property="stats">`status`,</isNotEmpty>
			<isNotNull  property="orderedDate">ordered_date,</isNotNull>
			<isNotNull  property="deliveryDate">delivery_date,</isNotNull>
			<isNotEmpty  property="supplierId">supplier_id,</isNotEmpty>
			<isNotEmpty  property="supplierName">supplier_name,</isNotEmpty>
			<isNotEmpty  property="tel">tel,</isNotEmpty>
			<isNotEmpty  property="linkMan">link_man,</isNotEmpty>
			<isNotEmpty  property="purchaser">purchaser,</isNotEmpty>
			<isNotEmpty  property="terms">terms,</isNotEmpty>
			<isNotEmpty  property="fax">fax,</isNotEmpty>
			<isNotEmpty  property="customerBillId">customer_bill_id,</isNotEmpty>
			<isNotEmpty  property="deliveryPoint">delivery_point,</isNotEmpty>
			<isNotEmpty  property="qualityStatus">quality_status,</isNotEmpty>
			<isNotEmpty  property="auditStatus">audit_status,</isNotEmpty>
			<isNotEmpty  property="instoreStatus">instore_status,</isNotEmpty>
			<isNotEmpty  property="paymentStatus">payment_status,</isNotEmpty>
			<isNotEmpty  property="paymentedStatus">paymented_status,</isNotEmpty>
			<isNotEmpty  property="purchaseReceiveOrderId">purchase_receive_order_id,</isNotEmpty>
			<isNotEmpty  property="instoreId">instore_id,</isNotEmpty>
			<isNotEmpty  property="goodsQtId">goods_qt_id,</isNotEmpty>
			<isNotNull  property="orderedAmount">ordered_amount,</isNotNull>
			<isNotNull  property="printTimes">print_times,</isNotNull>
			<isNotEmpty  property="printAcc">newest_print_acc,</isNotEmpty>
			<isNotEmpty  property="printRecord">newest_print_record,</isNotEmpty>
			<isNotNull  property="printTimes">print_times,</isNotNull>
			<isNotEmpty  property="operator">operator,</isNotEmpty>
			<isNotEmpty  property="ledgerId">ledger_id,</isNotEmpty> 
 		    <isNotEmpty  property="memo">memo,</isNotEmpty> 
	  	    creater,
	  	    createdate
   		)VALUES(
   			#purchaseOrderId#,
	  		<isNotEmpty  property="purchaseOrderMergerId">#purchaseOrderMergerId#,</isNotEmpty>
	  		<isNotEmpty  property="stats">#stats#,</isNotEmpty>
			<isNotNull  property="orderedDate">#orderedDate#,</isNotNull>
			<isNotNull  property="deliveryDate">#deliveryDate#,</isNotNull>
			<isNotEmpty  property="supplierId">#supplierId#,</isNotEmpty>
			<isNotEmpty  property="supplierName">#supplierName#,</isNotEmpty>
			<isNotEmpty  property="tel">#tel#,</isNotEmpty>
			<isNotEmpty  property="linkMan">#linkMan#,</isNotEmpty>
			<isNotEmpty  property="purchaser">#purchaser#,</isNotEmpty>
			<isNotEmpty  property="terms">#terms#,</isNotEmpty>
			<isNotEmpty  property="fax">#fax#,</isNotEmpty>
			<isNotEmpty  property="customerBillId">#customerBillId#,</isNotEmpty>
			<isNotEmpty  property="deliveryPoint">#deliveryPoint#,</isNotEmpty>
			<isNotEmpty  property="qualityStatus">#qualityStatus#,</isNotEmpty>
			<isNotEmpty  property="auditStatus">#auditStatus#,</isNotEmpty>
			<isNotEmpty  property="instoreStatus">#instoreStatus#,</isNotEmpty>
			<isNotEmpty  property="paymentStatus">#paymentStatus#,</isNotEmpty>
			<isNotEmpty  property="paymentedStatus">#paymentedStatus#,</isNotEmpty>
			<isNotEmpty  property="purchaseReceiveOrderId">#purchaseReceiveOrderId#,</isNotEmpty>
			<isNotEmpty  property="instoreId">#instoreId#,</isNotEmpty>
			<isNotEmpty  property="goodsQtId">#goodsQtId#,</isNotEmpty>
			<isNotNull  property="orderedAmount">#orderedAmount#,</isNotNull>
			<isNotNull  property="printTimes">#printTimes#,</isNotNull>
			<isNotEmpty  property="printAcc">#printAcc#,</isNotEmpty>
			<isNotEmpty  property="printRecord">#printRecord#,</isNotEmpty>
			<isNotNull  property="printTimes">#printTimes#,</isNotNull>
			<isNotEmpty  property="operator">#operator#,</isNotEmpty>
			<isNotEmpty  property="ledgerId">#ledgerId#,</isNotEmpty> 
 		    <isNotEmpty  property="memo">#memo#,</isNotEmpty> 
   			 creater,now()
   		)
   	</insert>
   
   	<update id="updatePurchaseOrderByPK" parameterClass="purchaseOrder">
   		UPDATE RS_PURCHASE_ORDER
   		<dynamic prepend="SET">
	  		<isNotEmpty   prepend=","  property="purchaseOrderMergerId">purchase_order_merger_id=#purchaseOrderMergerId#,</isNotEmpty>
	  		<isNotEmpty   prepend=","  property="stats">`status`=#stats#,</isNotEmpty>
			<isNotNull   prepend=","  property="orderedDate">ordered_date=#orderedDate#,</isNotNull>
			<isNotNull   prepend=","  property="deliveryDate">delivery_date=#deliveryDate#,</isNotNull>
			<isNotEmpty   prepend=","  property="supplierId">supplier_id=#supplierId#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="supplierName">supplier_name=#supplierName#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="tel">tel=#tel#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="linkMan">link_man=#linkMan#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="purchaser">purchaser=#purchaser#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="terms">terms=#terms#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="fax">fax=#fax#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="customerBillId">customer_bill_id=#customerBillId#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="deliveryPoint">delivery_point=#deliveryPoint#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="qualityStatus">quality_status=#qualityStatus#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="auditStatus">audit_status=#auditStatus#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="instoreStatus">instore_status=#instoreStatus#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="paymentStatus">payment_status=#paymentStatus#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="paymentedStatus">paymented_status=#paymentedStatus#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="purchaseReceiveOrderId">purchase_receive_order_id=#purchaseReceiveOrderId#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="instoreId">instore_id=#instoreId#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="goodsQtId">goods_qt_id=#goodsQtId#,</isNotEmpty>
			<isNotNull   prepend=","  property="ordered_amount">orderedAmount=#ordered_amount#,</isNotNull>
			<isNotNull   prepend=","  property="print_times">printTimes=#print_times#,</isNotNull>
			<isNotEmpty   prepend=","  property="printAcc">newest_print_acc=#printAcc#,</isNotEmpty>
			<isNotEmpty   prepend=","  property="printRecord">newest_print_record=#printRecord#,</isNotEmpty>
			<isNotNull   prepend=","  property="print_times">printTimes=#print_times#,</isNotNull>
			<isNotEmpty   prepend=","  property="operator">operator=#operator#,</isNotEmpty>
  	 		<isNotEmpty  prepend="," property="reviser">reviser = #reviser#,revisedate = now() </isNotEmpty>
  			<isNotEmpty  prepend="," property="verifier">verifier = #verifier#,verifydate = now() </isNotEmpty>
   		</dynamic>
   		WHERE purchase_order_id =#purchaseOrderId# 
   	</update>
   	<!-- 分页查询语句 -->
   	<select id="getPurchaseOrderSplitPageBySQL" remapResults="true" parameterClass="java.lang.String" resultMap="purchaseOrder">
   		$splitPageSQL$
   	</select>
   	<!-- end -->
   	
   	<select id="getPurchaseOrderSplitPageCountSQL" remapResults="true" parameterClass="java.lang.String" resultClass="java.lang.Integer">
   		$countSQL$
   	</select>
   	
   	<delete id="deletePurchaseOrder" parameterClass="purchaseOrder">
   		DELETE FROM RS_PURCHASE_ORDER
   		<include refid="whereLike"/>
   	</delete>
   	<delete id="deletePurchaseOrderByPK" parameterClass="java.lang.String">
   		DELETE FROM RS_PURCHASE_ORDER
   		WHERE purchase_order_id =#purchaseOrderId# 
   	</delete>
   	
   	<update id="updateStatusByPurchaseOrderId" parameterClass="purchaseOrder">
   		UPDATE RS_PURCHASE_ORDER 
		SET `status`=#stats#
		WHERE purchase_order_id = #purchaseOrderId#
   	</update>
</sqlMap>