<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="instoreOrderSqlMap">

  <typeAlias alias="instoreOrder" type="com.radius.invoicing.ibatis.model.InstoreOrder" />
  <sql id="instoreOrderFields">
  	instore_id instoreId,instore_date  instoreDate,STATUS status,instore_type instoreType,instore_object  instoreObject,warehouse_admin warehouseAdmin,
	certificate_no  certificateNo,certificate_type certificateType,batch_id  batchId,operator2 operator2,purchase_order_id purchaseOrderId, supplier_id  supplierId,
	supplier_name   supplierName,price   price, amount amount, print_times  printTimes,newest_print_time  printTime,newest_print_acc   printAcc,
	newest_print_record printRecord,memo memo,
	ledger_id ledgerId,operator operator,motify_date modifyDate,creater creater,createdate createDate,reviser reviser,revisedate reviseDate,verifier verifier,verifydate verifyDate      
  </sql> 
  <resultMap class="instoreOrder" id="instoreOrder">
  	<result column="instore_id" jdbcType="char" javaType="java.lang.String" property="instoreId" />      
	<result column="instore_date" jdbcType="date" javaType="java.util.Date" property="instoreDate" />     
	<result column="STATUS" jdbcType="int" javaType="java.lang.Integer" property="status" />      
	<result column="instore_type" jdbcType="int" javaType="java.lang.Integer" property="instoreType" />
	<result column="instore_object" jdbcType="text" javaType="java.lang.String" property="instoreObject"/>   
	<result column="warehouse_admin" jdbcType="char" javaType="java.lang.String" property="warehouseAdmin"/>
	<result column="certificate_no" jdbcType="text" javaType="java.lang.String" property="certificateNo"/>   
	<result column="certificate_type" jdbcType="char" javaType="java.lang.String" property="certificateType"/>   
	<result column="batch_id" jdbcType="char" javaType="java.lang.String" property="batchId"/>  
	<result column="operator2" jdbcType="char" javaType="java.lang.String" property="operator2"/>  
	<result column="purchase_order_id" jdbcType="char" javaType="java.lang.String" property="purchaseOrderId"/> 
	<result column="supplier_id" jdbcType="char" javaType="java.lang.String" property="supplierId"/>  
	<result column="supplier_name" jdbcType="varchar" javaType="java.lang.String" property="supplierName"/>   
	<result column="price" jdbcType="int" javaType="java.lang.Integer" property="price"/>   
	<result column="amount" jdbcType="int" javaType="java.lang.Integer" property="amount"/>            
	<result column="print_times" jdbcType="int" javaType="java.lang.Integer" property="printTimes"/>      
	<result column="newest_print_time" jdbcType="datetime" javaType="java.util.Date" property="printTime"/>
	<result column="newest_print_acc" jdbcType="char" javaType="java.lang.String" property="printAcc"/>
	<result column="newest_print_record" jdbcType="varchar" javaType="java.lang.String" property="printRecord"/>
	<result column="memo" jdbcType="text" javaType="java.lang.String" property="memo"/>   
	
	<result column="ledger_id" jdbcType="char" javaType="java.lang.String" property="ledgerId" />
    <result column="operator" jdbcType="char" javaType="java.lang.String" property="operator" />
    <result column="motify_date" jdbcType="datetime" javaType="java.util.Date" property="modifyDate" />
    <result column="creater" jdbcType="char" javaType="java.lang.String" property="creater" />
    <result column="createdate" jdbcType="datetime" javaType="java.util.Date" property="createDate" />
    <result column="reviser" jdbcType="char" javaType="java.lang.String" property="reviser" />
    <result column="revisedate" jdbcType="datetime" javaType="java.util.Date" property="reviseDate" />
    <result column="verifier" jdbcType="char" javaType="java.lang.String" property="verifier" />    
    <result column="verifydate" jdbcType="datetime" javaType="java.util.Date" property="verifyDate"/>
  </resultMap>  
  
  <sql id="whereLike">
  	<dynamic prepend="where">
  		1=1
  		<isNotEmpty  property="instoreId"> AND instore_id =#instoreId#</isNotEmpty> 
  		<isNotNull  property="instoreDate"> AND instore_date=#instoreDate#</isNotNull>    
		<isNotNull  property="status"> AND  STATUS=#status#</isNotNull>     
		<isNotNull  property="instoreType"> AND  instore_type=#instoreType#</isNotNull>
		<isNotEmpty  property="instoreObject"> AND  instore_object=#instoreObject#</isNotEmpty>  
		<isNotEmpty  property="warehouseAdmin"> AND  warehouse_admin=#warehouseAdmin#</isNotEmpty>
		<isNotEmpty  property="certificateNo"> AND  certificate_no=#certificateNo#</isNotEmpty>  
		<isNotEmpty  property="certificateType"> AND  certificate_type=#certificateType#</isNotEmpty>  
		<isNotEmpty  property="batchId"> AND  batch_id=#batchId#</isNotEmpty> 
		<isNotEmpty  property="operator2"> AND  operator2=#operator2#</isNotEmpty> 
		<isNotEmpty  property="purchaseOrderId"> AND  purchase_order_id=#purchaseOrderId#</isNotEmpty>
		<isNotEmpty  property="supplierId"> AND  supplier_id=#supplierId#</isNotEmpty>  
		<isNotEmpty  property="supplierName"> AND  supplier_name LIKE CONCAT('%',#supplierName#,'%')</isNotEmpty>  
		<isNotNull  property="price"> AND  price=#price#</isNotNull>  
		<isNotNull  property="amount"> AND  amount=#amount#</isNotNull>           
		<isNotEmpty  property="memo"> AND  memo=#memo#</isNotEmpty> 
		<isNotEmpty  property="ledgerId"> AND ledger_id=#ledgerId#</isNotEmpty> 
  	</dynamic>
  </sql>
  
  <select id="getInstoreOrderById" parameterClass="java.lang.String" resultClass="instoreOrder">
  	SELECT <include refid="instoreOrderFields"/>
  	FROM RS_INSTORE_ORDER
  	WHERE instore_id =#instoreId#
  </select>
  
  <select id="getInstoreOrderCondition" parameterClass="instoreOrder" resultClass="instoreOrder">
  	SELECT <include refid="instoreOrderFields"/>
  	FROM RS_INSTORE_ORDER
  	<include refid="whereLike"/>
  </select>
  
  <select id="getInstoreOrderCountById" parameterClass="java.lang.String" resultClass="java.lang.Integer">
  	SELECT COUNT(1) FROM RS_INSTORE_ORDER  WHERE instore_id =#instoreId#
  </select>
  
  <insert id="insert" parameterClass="instoreOrder">
  	INSERT INTO RS_INSTORE_ORDER 
  	(
  		instore_id  
		<isNotNull  property="instoreDate"> instore_date,</isNotNull>    
		<isNotNull  property="status"> STATUS,</isNotNull>     
		<isNotNull  property="instoreType"> instore_type,</isNotNull>
		<isNotEmpty  property="instoreObject"> instore_object,</isNotEmpty>  
		<isNotEmpty  property="warehouseAdmin"> warehouse_admin,</isNotEmpty>
		<isNotEmpty  property="certificateNo"> certificate_no,</isNotEmpty>  
		<isNotEmpty  property="certificateType"> certificate_type,</isNotEmpty>  
		<isNotEmpty  property="batchId"> batch_id,</isNotEmpty> 
		<isNotEmpty  property="operator2"> operator2,</isNotEmpty> 
		<isNotEmpty  property="purchaseOrderId"> purchase_order_id,</isNotEmpty>
		<isNotEmpty  property="supplierId"> supplier_id,</isNotEmpty>  
		<isNotEmpty  property="supplierName"> supplier_name,</isNotEmpty>  
		<isNotNull  property="price"> price,</isNotNull>  
		<isNotNull  property="amount"> amount,</isNotNull>           
		<isNotEmpty  property="memo"> memo,</isNotEmpty> 
  	    creater,
	    createdate 
  	) VALUES (
  		#instoreId#
  		<isNotNull  property="instoreDate">#instoreDate#,</isNotNull>    
		<isNotNull  property="status">#status#,</isNotNull>     
		<isNotNull  property="instoreType">#instoreType#,</isNotNull>
		<isNotEmpty  property="instoreObject">#instoreObject#,</isNotEmpty>  
		<isNotEmpty  property="warehouseAdmin">#warehouseAdmin#,</isNotEmpty>
		<isNotEmpty  property="certificateNo">#certificateNo#,</isNotEmpty>  
		<isNotEmpty  property="certificateType">#certificateType#,</isNotEmpty>  
		<isNotEmpty  property="batchId">#batchId#,</isNotEmpty> 
		<isNotEmpty  property="operator2">#operator2#,</isNotEmpty> 
		<isNotEmpty  property="purchaseOrderId">#purchaseOrderId#,</isNotEmpty>
		<isNotEmpty  property="supplierId">#supplierId#,</isNotEmpty>  
		<isNotEmpty  property="supplierName">#supplierName#,</isNotEmpty>  
		<isNotNull  property="price">#price#,</isNotNull>  
		<isNotNull  property="amount">#amount#,</isNotNull>           
		<isNotEmpty  property="memo">#memo#,</isNotEmpty> 
  	    #creater#,
	    now()
  	)
  </insert>
  
  <update id="updateInstoreOrder" parameterClass="instoreOrder">
  	UPDATE RS_INSTORE_ORDER
	<dynamic prepend="SET">
  		<isNotNull 	prepend=","  property="instoreDate"> instore_date=#instoreDate#</isNotNull>    
		<isNotNull 	prepend=","  property="status"> STATUS=#status#</isNotNull>     
		<isNotNull 	prepend=","  property="instoreType"> instore_type=#instoreType#</isNotNull>
		<isNotEmpty prepend=","  property="instoreObject"> instore_object=#instoreObject#</isNotEmpty>  
		<isNotEmpty prepend=","  property="warehouseAdmin"> warehouse_admin=#warehouseAdmin#</isNotEmpty>
		<isNotEmpty prepend=","  property="certificateNo"> certificate_no=#certificateNo#</isNotEmpty>  
		<isNotEmpty prepend=","  property="certificateType"> certificate_type=#certificateType#</isNotEmpty>  
		<isNotEmpty prepend=","  property="batchId"> batch_id=#batchId#</isNotEmpty> 
		<isNotEmpty prepend=","  property="operator2"> operator2=#operator2#</isNotEmpty> 
		<isNotEmpty prepend=","  property="purchaseOrderId"> purchase_order_id=#purchaseOrderId#</isNotEmpty>
		<isNotEmpty prepend=","  property="supplierId"> supplier_id=#supplierId#</isNotEmpty>  
		<isNotEmpty prepend=","  property="supplierName"> supplier_name LIKE CONCAT('%',#supplierName#,'%')</isNotEmpty>  
		<isNotNull 	prepend=","  property="price"> price=#price#</isNotNull>  
		<isNotNull 	prepend=","  property="amount"> amount=#amount#</isNotNull>           
		<isNotEmpty prepend=","  property="memo"> memo=#memo#</isNotEmpty> 
		<isNotEmpty prepend=","  property="operator">operator=#operator#,motify_date= now()</isNotEmpty>
  	 	<isNotEmpty prepend=","  property="reviser">reviser = #reviser#,revisedate = now() </isNotEmpty>
  		<isNotEmpty prepend=","  property="verifier">verifier = #verifier#,verifydate = now() </isNotEmpty>
  	</dynamic>
  	WHERE instore_id =#instoreId#
  </update>
  
  <update id="updateInstoreOrderStatus" parameterClass="instoreOrder">
  	UPDATE RS_INSTORE_ORDER
   	SET status=#status# <isNotEmpty prepend=","  property="operator">operator=#operator#,motify_date= now()</isNotEmpty>
   	WHERE contract_id=#contractId#
  </update>
  
  <delete id="deleteInstoreOrderByCondition" parameterClass="instoreOrder">
  	DELETE FROM RS_INSTORE_ORDER
   	<include refid="whereLike"/>
  </delete>
  
  <delete id="deleteInstoreOrderById" parameterClass="java.lang.String">
  	DELETE FROM RS_INSTORE_ORDER
  	WHERE contract_id=#contractId#
  </delete>
  
</sqlMap>